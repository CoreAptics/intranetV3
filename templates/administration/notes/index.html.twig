{% extends 'base.html.twig' %}

{% block header %}
    {{ 'liste.des.notes.du.semestre'|trans({'%libelle%':semestre.libelle})|raw }}
{% endblock %}

{% block headerright %}
    <div class="right gap-items-2">
        {% for sem in user_data.semestres %}
            <a href="{{ path('administration_notes_semestre_index', {semestre:sem.id}) }}"
               class="btn btn-square btn-round {% if sem.id == semestre.id %}btn-primary{% endif %}"
               title="{{ 'atitle.changer.semestre'|trans }}"
               data-provide="tooltip"
               data-placement="bottom"
            >{{ sem.libelle }}</a>
        {% endfor %}
    </div>
{% endblock %}

{% block headeractions %}
    <div class="header-action">
        <div class="buttons">
            <a href="{{ path('administration_semestre_index', {semestre:semestre.id}) }}"
               class="btn btn-primary btn-float" data-provide="tooltip"
               data-placement="bottom" title="{{ 'atitle.retour_semestres'|trans }}"><i class="ti-arrow-left"></i></a>
            <a href="{{ path('administration_index') }}" class="btn btn-primary btn-float" data-provide="tooltip"
               data-placement="bottom" title="{{ 'atitle.retour_administration'|trans }}"><i class="ti-home"></i></a>
        </div>
    </div>
{% endblock %}

{% block content %}
    <div class="card">
        <div class="card-body">
            <table class="table table-striped table-bordered" cellspacing="0">
                <thead>
                <tr>
                    <th>{{ 'table.matiere'|trans }}</th>
                    <th>{{ 'table.coefficient'|trans }}</th>
                    <th>{{ 'table.nb_notes'|trans }}</th>
                    <th>{{ 'table.evaluations'|trans }}</th>
                </tr>
                </thead>
                <tbody>
                {% for matiere in matieres %}
                    <tr>
                        <td>{{ matiere.codeMatiere }} | {{ matiere.libelle }}</td>
                        <td>{{ matiere.coefficient }}</td>
                        <td>{{ matiere.nbNotes }}</td>
                        <td>
                            {% set nbEval = 0 %}
                            <div class="btn-toolbar">


                                {% for evaluation in evaluations[matiere.id] %}
                                    <div class="btn-group mr-2">
                                        <button class="btn btn-success">Eval
                                            du {{ evaluation.dateEvaluation|localizeddate('long', 'none', app.request.getLocale()) }}
                                            (#{{ evaluation.id }})
                                        </button>
                                        <button class="btn btn-info btn-outline btn-square optAfficher"
                                                data-id="{{ evaluation.id }}"
                                                data-placement="bottom"
                                                title="Supprimer">
                                            <i class="fa fa-eye"></i>
                                        </button>
                                        <button class="btn btn-warning btn-outline btn-square optVerrouiller"
                                                data-id="{{ evaluation.id }}"
                                                data-placement="bottom"
                                                title="Supprimer">
                                            <i class="fa fa-lock"></i>
                                        </button>
                                        <button class="btn btn-danger btn-outline btn-square supprimer"
                                                data-provide="tooltip"
                                                data-placement="bottom"
                                                title="{{ 'atitle.supprimer'|trans }}"
                                                data-id="{{ evaluation.id }}">
                                            <i class="ti-close"></i>
                                        </button>
                                    </div>
                                    {% set nbEval = nbEval + 1 %}
                                {% endfor %}
                                {% for i in nbEval..matiere.nbNotes-1 %}
                                    <div class="btn-group">
                                        <button class="btn btn-label btn-primary"
                                                data-provide="tooltip"
                                                data-placement="bottom"
                                                title="{{ 'atitle.saisir.evaluation'|trans }}">
                                            <label><i class="ti-plus"></i></label> {{ 'saisir.evaluation'|trans }}
                                        </button>

                                    </div>
                                {% endfor %}
                            </div>
                        </td>
                    </tr>
                {% endfor %}

                </tbody>
            </table>
        </div>
    </div>
{% endblock %}
