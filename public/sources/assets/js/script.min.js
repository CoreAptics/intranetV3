/*!
 * IntranetV3 v0.0.1 (http://thetheme.io/theadmin)
 * Copyright 2018 TheTheme.io / David Annebicque
 * Licensed under the Themeforest Standard Licenses
 */

"use strict";function readUrlMenu(a){if("/"!==a&&"/index.php/"!==a){var b=a.split("/"),c=0;console.log(b),"index.php"===b[1]&&b.length>1&&(c=2),$(".menu-item").removeClass("active"),$("#menu-"+b[c]).addClass("active")}else $("#menu-dashboard").addClass("active")}app.config({autoload:!0,provide:["datatables","quill","momentjs","chartjs"],googleApiKey:"AIzaSyDRBLFOTTh2NFM93HpUA4ZrA99yKnCAsto",googleAnalyticsId:"",smoothScroll:!1,saveState:!1,cacheBust:""}),$(document).on("click",".supprimer",function(a){a.preventDefault();var b=$(this).attr("href"),c=$(this).data("csrf");swal({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",confirmButtonClass:"btn btn-primary",cancelButtonClass:"btn btn-secondary",buttonsStyling:!1}).then(function(a){console.log(a),a.value?(console.log(b),$.ajax({url:b,type:"DELETE",data:{_token:c},success:function(a){$("#ligne_"+a).closest("tr").remove(),swal("Deleted!","Your file has been deleted.","success")},error:function(a,b,c){swal("Error deleting!","Please try again","error")}})):"cancel"===a.dismiss&&swal("Cancelled","Your imaginary file is safe :)","error")})}),app.ready(function(){function a(){for(var a=0,b=0,c=0,e=0,f=0,g=0,h=1;h<=d;h++)a+=parseFloat($("#cm_"+h).val())*parseInt($("#gr_cm_"+h).val()),b+=parseFloat($("#td_"+h).val())*parseInt($("#gr_td_"+h).val()),c+=parseFloat($("#tp_"+h).val())*parseInt($("#gr_tp_"+h).val()),g=g+a+b+c,f=f+parseFloat($("#cm_"+h).val())+parseFloat($("#td_"+h).val())+parseFloat($("#tp_"+h).val());$("#totalCm").html(a.toFixed(2)),$("#totalTd").html(b.toFixed(2)),$("#totalTp").html(c.toFixed(2)),$("#totalEqTd").html(e.toFixed(2)),$("#totalEtu").html(f.toFixed(2)),$("#totalMatiere").html(g.toFixed(2))}readUrlMenu($(location).attr("pathname"));var b={decimal:"",emptyTable:"Aucune donn&eacute;e disponible dans le tableau",info:"Affichage de l'&eacute;l&eacute;ment _START_ &agrave; _END_ sur _TOTAL_ &eacute;l&eacute;ments",infoEmpty:"Affichage de l'&eacute;l&eacute;ment 0 &agrave; 0 sur 0 &eacute;l&eacute;ment",infoFiltered:"(filtr&eacute; de _MAX_ &eacute;l&eacute;ments au total)",infoPostFix:"",thousands:",",lengthMenu:"Afficher _MENU_ &eacute;l&eacute;ments",loadingRecords:"Chargement en cours...",processing:"Traitement en cours...",search:"Rechercher&nbsp;:",zeroRecords:"Aucun &eacute;l&eacute;ment &agrave; afficher",paginate:{first:"Premier",last:"Dernier",next:"Suivant",previous:"Pr&eacute;c&eacute;dent"},aria:{sortAscending:": activer pour trier la colonne par ordre croissant",sortDescending:": activer pour trier la colonne par ordre d&eacute;croissant"}};$(document).on("click",".page-link",function(a){a.preventDefault(),a.stopPropagation();var b=$("#zone-pagination");b.empty(),b.load($(this).attr("href"))}),$(document).on("click",".changeprofil",function(a){a.preventDefault(),a.stopPropagation(),$(".changeprofil").removeClass("active show"),$(this).addClass("active show"),$("#profilContent").empty().load($(this).attr("href"))}),$(document).on("change",".addfavori",function(a){a.preventDefault(),a.stopPropagation(),$.ajax({url:Routing.generate("user_add_favori.fr"),method:"POST",data:{user:$(this).val(),etat:$(this).prop("checked")}})}),$(document).on("click",".afficheDocuments",function(){$("#zone_document").empty().load(Routing.generate("document_ajax",{typedocument:$(this).data("type")})),$("#boutonBack").show()}),$(document).on("click","#boutonBack",function(){$("#zone_document").empty().load(Routing.generate("typedocument_ajax")),$("#boutonBack").hide()}),$(document).on("click",".semestretrombi",function(a){a.preventDefault(),$("#trombifiltre").show(),$(".semestretrombi").removeClass("active show"),$(".enseignanttrombi").removeClass("active show"),$(this).addClass("active show"),$(".card-title").html($(this).text()),$.ajax({url:Routing.generate("api_etudiants_semestre",{semestre:$(this).data("sem")}),success:function(a){$("#trombi").empty(),jQuery.each(a,function(a,b){var c='<div class="col-sm-6 col-md-3 col-lg-3">\n    <div class="card card-trombi">\n        <div class="flexbox align-items-center px-20 pt-20">\n            <label class="toggler toggler-danger fs-16">\n                <input type="checkbox" checked class="addfavori" value="'+b.slug+'">\n                <i class="fa fa-heart"></i>\n            </label>\n            <div class="dropdown">\n                <a data-toggle="dropdown" href="#"><i class="ti-more-alt rotate-90 text-muted"></i></a>\n                <div class="dropdown-menu dropdown-menu-right">\n                    <a class="dropdown-item" href="'+Routing.generate("user_profil.fr",{type:"etudiant",slug:b.slug})+'"><i class="fa fa-user"></i> Profil</a>\n                    <a class="dropdown-item" href="#"><i class="fa fa-picture-o"></i> Site personnel</a>\n                    <a class="dropdown-item" href="#"><i class="ti-world"></i> Site Universitaire</a>\n                    <a class="dropdown-item" href="#"><i class="ti-email"></i> Contacter</a>\n                </div>\n            </div>\n        </div>\n        <div class="card-body text-center pt-1 pb-50">\n            <a href="'+Routing.generate("user_profil.fr",{type:"etudiant",slug:b.slug})+'">\n                <img class="avatar avatar-xxl" src="">\n            </a>\n            <h5 class="mt-3 mb-1">\n                <a class="hover-primary" href="'+Routing.generate("user_profil.fr",{type:"etudiant",slug:b.slug})+'">'+b.prenom+" "+b.nom+"\n                </a>\n            </h5>\n        </div>\n    </div>\n</div>";$("#trombi").append(c)})}})}),$(document).on("click",".enseignanttrombi",function(a){a.preventDefault(),$("#trombifiltre").hide(),$(".semestretrombi").removeClass("active show"),$(".enseignanttrombi").removeClass("active show"),$(this).addClass("active show"),$(".card-title").html($(this).text()),$.ajax({url:Routing.generate("api_enseignants_type",{type:$(this).data("type")}),dataType:"json",success:function(a){$("#trombi").empty(),jQuery.each(a,function(a,b){var c='<div class="col-sm-6 col-md-3 col-lg-3">\n    <div class="card card-trombi">\n        <div class="flexbox align-items-center px-20 pt-20">\n            <label class="toggler toggler-danger fs-16">\n                <input type="checkbox" checked>\n                <i class="fa fa-heart"></i>\n            </label>\n            <div class="dropdown">\n                <a data-toggle="dropdown" href="#"><i class="ti-more-alt rotate-90 text-muted"></i></a>\n                <div class="dropdown-menu dropdown-menu-right">\n                    <a class="dropdown-item" href="'+Routing.generate("user_profil",{type:"personnel",slug:b.slug})+'"><i class="fa fa-user"></i> Profil</a>\n                    <a class="dropdown-item" href="#"><i class="fa fa-picture-o"></i> Site personnel</a>\n                    <a class="dropdown-item" href="#"><i class="ti-world"></i> Site Universitaire</a>\n                    <a class="dropdown-item" href="#"><i class="ti-email"></i> Contacter</a>\n                </div>\n            </div>\n        </div>\n        <div class="card-body text-center pt-1 pb-50">\n            <a href="'+Routing.generate("user_profil",{type:"personnel",slug:b.slug})+'">\n                <img class="avatar avatar-xxl" src="">\n            </a>\n            <h5 class="mt-3 mb-1">\n                <a class="hover-primary" href="'+Routing.generate("user_profil",{type:"personnel",slug:b.slug})+'">'+b.prenom+" "+b.nom+"\n                </a>\n            </h5>\n        </div>\n    </div>\n</div>";$("#trombi").append(c)})}})}),$(document).on("keyup","#login_urca",function(){var a=$(this).val();console.log(a),a.length>2&&$.ajax({url:Routing.generate("api_personnel_recherche",{needle:a}),dataType:"json",success:function(a){$("#result").empty(),jQuery.each(a,function(a,b){var c="<tr><td>"+b.nom+"</td><td>"+b.prenom+"</td><td>"+b.username+"</td><td>"+b.mail_univ+'</td><td><a href="#" class="btn btn-success btn-outline btn-square addpersonnel" data-provide="tooltip" data-placement="bottom" title="Ajouter à la formation" data-slug="'+b.slug+'"><i class="ti-plus"></i></a></td></tr>';$("#result").append(c)})}})}),$(document).on("click",".addpersonnel",function(){$.ajax({url:Routing.generate("api_personnel_add_to_formation",{slug:$(this).data("slug")}),dataType:"json",success:function(a){$(this).remove()}})}),$(document).on("click",".personnel_index_change",function(){$(".personnel_index_change").removeClass("active show"),$(this).addClass("active show");var a=$("#tableau").DataTable();a.clear(),a.destroy(),$.ajax({url:Routing.generate("api_enseignants_type",{type:$(this).data("type")}),dataType:"json",success:function(a){jQuery.each(a,function(a,b){var c="<tr>\n                        <td>"+b.nom+"</td>\n                        <td>"+b.prenom+"</td>\n                        <td>"+b.posteInterne+"</td>\n                        <td>"+b.telBureau+"</td>\n                        <td>"+b.bureau1+"</td>\n                        <td>"+b.numeroHarpege+"</td>\n                        <td>"+b.mailUniv+'</td>\n                        <td>\n<a href="'+Routing.generate("administration_personnel_show",{id:b.id})+'" class="btn btn-info btn-outline btn-square" data-provide="tooltip"\n   data-placement="bottom" title="Détails"><i class="ti-eye"></i></a>\n<a href="'+Routing.generate("administration_personnel_edit",{id:b.id})+'"\n   class="btn btn-warning btn-outline btn-square"><i class="ti-pencil"\n                                                     data-provide="tooltip"\n                                                     data-placement="bottom"\n                                                     title="Modifier"></i></a>\n<a href="'+Routing.generate("administration_personnel_delete",{id:b.id})+'" class="btn btn-danger btn-outline btn-square supprimer" data-id="id"><i\n            class="ti-close" data-provide="tooltip" data-placement="bottom"\n            title="Supprimer"></i></a>';$("#datatableau").append(c)}),$("#tableau").DataTable({})}})}),$("#datatableRh").DataTable({processing:!0,serverSide:!0,ajax:Routing.generate("api_all_personnel"),sAjaxDataProp:"data",pageLength:25,columns:[{data:"numero_harpege"},{data:"nom"},{data:"prenom"},{data:"formations"},{data:"profil"}]});var c=$("#datatableEtudiants").DataTable({});c.clear(),c.destroy(),$("#datatableEtudiants").DataTable({language:b,processing:!0,serverSide:!0,ajax:Routing.generate("api_etudiant_formation"),sAjaxDataProp:"data",columns:[{data:"numetudiant"},{data:"nom"},{data:"prenom"},{data:"semestre"},{data:"profil"}]}),$(document).on("click",".changeapplication",function(a){a.preventDefault(),a.stopPropagation(),$(".changeapplication").removeClass("active show"),$(this).addClass("active show"),$("#mainContent").empty().load($(this).attr("href"))});var d=1;$(document).on("change","#previSemestre",function(a){a.preventDefault(),a.stopPropagation(),$("#blocPrevisionnel").empty().load(Routing.generate("administration_previsionnel_semestre.fr",{semestre:$(this).val()}))}),$(document).on("change","#previMatiere",function(a){a.preventDefault(),a.stopPropagation(),$("#blocPrevisionnel").empty().load(Routing.generate("administration_previsionnel_matiere.fr",{matiere:$(this).val()}))}),$(document).on("change","#previPersonnel",function(a){a.preventDefault(),a.stopPropagation(),$("#blocPrevisionnel").empty().load(Routing.generate("administration_previsionnel_personnel.fr",{personnel:$(this).val()}))}),$(document).on("click",".previsionnel_add_change",function(a){a.preventDefault(),a.stopPropagation(),$(".previsionnel_add_change").removeClass("active show"),$(this).addClass("active show"),$("#mainContent").empty().load($(this).attr("href"))}),$(document).on("click","#addIntervenantPrevisionnel",function(a){a.preventDefault(),a.stopPropagation(),d++;var b='<tr>\n                        <td>\n                            <select class="form-control">\n                                <option value="">Choisir l\'intervenant</option>\n                            </select>\n                        </td>\n                        <td><input type="text" name="cm_1" id="cm_'+d+'" data-ligne="1" class="form-control chgcm" value="0"></td>\n                        <td><input type="number" name="gr_cm_1" id="gr_cm_'+d+'" value="0" data-ligne="1" class="form-control chgcm">\n                        </td>\n                        <td id="ind_cm_'+d+'">0</td>\n                        <td style="background-color: #68C39F"><input type="text" value="0" name="td_'+d+'" id="td_'+d+'" data-ligne="'+d+'"\n                                                                     class="form-control chgtd"></td>\n                        <td style="background-color: #68C39F"><input type="number" value="0" name="gr_td_'+d+'" id="gr_td_'+d+'"\n                                                                     data-ligne="'+d+'" class="form-control chgtd"></td>\n                        <td style="background-color: #68C39F" id="ind_td_'+d+'">0</td>\n                        <td style="background-color: #FFC052"><input type="text" value="0" name="tp_'+d+'" id="tp_'+d+'" data-ligne="'+d+'"\n                                                                     class="form-control chgtp"></td>\n                        <td style="background-color: #FFC052"><input type="number" value="0" name="gr_tp_'+d+'" id="gr_tp_'+d+'"\n                                                                     data-ligne="'+d+'" class="form-control chgtp"></td>\n                        <td style="background-color: #FFC052" id="ind_tp_'+d+'">0</td>\n                    </tr>';$("#nbLigne").val(d),$("#ligneAdd").before(b)}),$(document).on("change",".chgcm",function(b){var c=$(this).data("ligne"),d=parseFloat($("#cm_"+c).val())/1.5;$("#ind_cm_"+c).html(d.toFixed(2)),a()}),$(document).on("change",".chgtd",function(b){var c=$(this).data("ligne"),d=parseFloat($("#td_"+c).val())/1.5;$("#ind_td_"+c).html(d.toFixed(2)),a()}),$(document).on("change",".chgtp",function(b){var c=$(this).data("ligne"),d=parseFloat($("#tp_"+c).val())/1.5;$("#ind_tp_"+c).html(d.toFixed(2)),a()}),$(document).on("change","#previsionnel_semestre",function(){var a=$("#previsionnel_matiere");""==$(this).val()?(a.empty(),a.append($("<option></option>").attr("value","").text("Choisir d'abord un semestre"))):$.ajax({url:Routing.generate("api_matieres_semestre",{semestre:$(this).val()}),success:function(b){a.empty(),a.append($("<option></option>").attr("value","").text("Choisir une matière")),jQuery.each(b,function(b,c){a.append($("<option></option>").attr("value",c.id).text(c.libelle))})}})}),$(document).on("change","#previsionnel_matiere",function(){var a=$("#volumeMatiere");""==$(this).val()?a.html("Choisir d'abord une matière"):$.ajax({url:Routing.generate("api_matiere",{matiere:$(this).val()}),success:function(b){var c="PPN Officiel => CM "+b.cmFormation+" heure(s); TD "+b.tdFormation+" heure(s); TP "+b.tpFormation+" heure(s); PPN Réalisé/formation => CM "+b.cmPpn+" heure(s); TD "+b.tdPpn+" heure(s); TP "+b.tpPpn+" heure(s);";a.html(c)}})}),$(document).on("click",".previsionnelModule",function(){var a=$("#modalPrevisionnel");$.ajax({url:Routing.generate("api_previsionnel_matiere",{matiere:$(this).data("matiere")}),success:function(b){a.empty();var c='<table class="table table-bordered table-condensed">\n                    <thead>\n                    <tr>\n                        <th class="cm">NB h*</th>\n                        <th class="cm">NB Gr.</th>\n                        <th class="cm">1.5**</th>\n\n                        <th class="previtd">NB h/ Gr.*</th>\n                        <th class="previtd">NB Gr.</th>\n                        <th class="previtd">1.5**</th>\n\n                        <th class="previtp">NB h/ Gr.*</th>\n                        <th class="previtp">NB Gr.</th>\n                        <th class="previtp">1.5**</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n';jQuery.each(b,function(a,b){c=c+'                        <tr>\n                            <td colspan="9">\n                                '+b.personnel+"\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>"+b.nbHCm+" h</td>\n                            <td>"+b.nbGrCm+"</td>\n                            <td>"+b.nbSeanceCm+'</td>\n                            <td class="previtd">'+b.nbHTd+' h</td>\n                            <td class="previtd">'+b.nbGrTd+'</td>\n                            <td class="previtd">'+b.nbSeanceTd+'</td>\n                            <td class="previtp">'+b.nbHTp+' h</td>\n                            <td class="previtp">'+b.nbGrTp+'</td>\n                            <td class="previtp">'+b.nbSeanceTp+"</td>\n                        </tr>\n"}),c+="                    </tbody>\n                </table>",a.append(c)}})}),$(document).on("click",".changeinformation",function(a){a.preventDefault(),a.stopPropagation(),console.log($(this).text()),$("#header-title").empty().append($(this).text()),$(".changeinformation").removeClass("active show"),$(this).addClass("active show"),$("#mainContent").empty().load($(this).attr("href"))}),$(document).on("change",".changeOption",function(a){a.preventDefault(),a.stopPropagation(),console.log($(this)),console.log(),$.ajax({url:Routing.generate("administration_configuration_change_option.fr"),method:"POST",data:{type:$(this).data("type"),value:$(this).prop("checked"),name:$(this).attr("name"),id:$(this).data("id")}})}),$(document).on("change",".changeOptionSelect",function(a){a.preventDefault(),a.stopPropagation(),console.log($(this)),console.log(),$.ajax({url:Routing.generate("administration_configuration_change_option.fr"),method:"POST",data:{type:$(this).data("type"),value:$(this).val(),name:$(this).attr("name"),id:$(this).data("id")}})}),$(document).on("click",".messagerie-filtre",function(a){a.preventDefault(),a.stopPropagation(),$.ajax({url:Routing.generate("messagerie_filtre",{filtre:$(this).data("filtre")}),method:"GET",dataType:"json",success:function(a){$("#messages-liste").empty();var b="";jQuery.each(a,function(a,c){b+='<div class="media align-items-center">\n                        <div class="custom-control custom-checkbox">\n                            <input type="checkbox" class="custom-control-input">\n                            <label class="custom-control-label"></label>\n                        </div>\n                        <label class="toggler ml-20 fs-16">\n                            <input type="checkbox">\n                            <i class="fa fa-star"></i>\n                        </label>\n                        <span class="badge badge-dot badge-danger"></span>\n                        <a href="#"><img class="avatar" src="../assets/img/avatar/1.jpg" alt="..."></a>\n                        <a class="media-body text-truncate" href="mailbox-single.html">\n                            <h6>Maryam Amiri</h6>\n                            <small>\n                                <strong>Happy Christmas!</strong>\n                                <span class="fw-300 opacity-80">Conveniently parallel task wireless convergence before goal-oriented human capital.</span>\n                            </small>\n                        </a>\n                        <a class="text-lighter fs-18 opacity-0" href="#"><i class="ti-clip"></i></a>\n                        <time datetime="2018">12:35 AM</time>\n                    </div>'})}})}),$(document).on("click",".message-read",function(a){a.preventDefault(),a.stopPropagation(),$("#messages-liste").empty().load(Routing.generate("messagerie_message",{message:1}))}),$(document).on("click","#message-new",function(a){a.preventDefault(),a.stopPropagation(),$("#zone-messagerie").empty().load(Routing.generate("messagerie_new"))}),$(document).on("click","#marquerNotificationsRead",function(a){a.preventDefault(),a.stopPropagation(),$.ajax({url:Routing.generate("notification_marquer_lu"),success:function(a){$(".notification").removeClass("media-new")}})});var c=$("#tableJustifier").DataTable({retrieve:!0});$(document).on("change","#justifier_etudiant",function(a){$.ajax({url:Routing.generate("administration_absences_liste_absence_etudiant.fr",{etudiant:$(this).val()}),success:function(a){console.log("ok"),c.rows().remove(),jQuery.each(data,function(a,b){c.row.add([1,2,'<a href="" class="btn btn-danger supprimer"><i class="ti-close"></i></a>']).draw()})}})}),$(document).on("click",".articleLike",function(a){a.preventDefault(),a.stopPropagation(),$.ajax({url:Routing.generate("article_like.fr",{slug:$(this).data("article")}),success:function(a){console.log("ok")}})}),$("#editCourrier");var e=$(".preloader");if(e.length){var f=e.dataAttr("hide-spped",600);e.fadeOut(f)}$(document).on({ajaxStart:function(){e.show()},ajaxStop:function(){e.hide()}}),$(".callout").delay(5e3).slideUp("slow")});